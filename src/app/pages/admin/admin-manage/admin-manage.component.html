<div class="min-h-screen dark:from-zinc-900 dark:via-zinc-800 dark:to-zinc-900">
  <div class="max-w-7xl mx-auto px-4 sm:px-6">
    <div
      class="flex flex-col sm:flex-row items-center justify-between mb-4 gap-4"
    >
      <h1
        class="text-3xl font-semibold text-zinc-900 dark:text-white tracking-tight"
      >
        Manage Exams
      </h1>
      <a
        [routerLink]="['/teacher', 'manage', 'addexam']"
        class="w-full sm:w-fit inline-flex items-center gap-2 px-9 py-3 bg-purple-600 cursor-pointer text-white font-semibold rounded-lg shadow transition-all duration-200"
      >
        <svg
          class="w-5 h-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 4v16m8-8H4"
          />
        </svg>
        Add New Exam
      </a>
    </div>

    <div class="flex flex-col sm:flex-row justify-between gap-4 mb-8">
      <input
        (input)="handleSearch($event)"
        type="text"
        placeholder="Search exams..."
        class="w-full sm:w-80 px-3 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:outline-none transition"
      />
      <select
        #category
        (change)="handleCategoryChange($event)"
        class="w-full sm:w-56 px-3 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:outline-none transition"
      >
          <option value="all">All Subjects</option>
      @for (exam of exams; track $index) {
      <option value="{{ exam.category }}">{{ exam.category }}</option>
      } 
      </select>
    </div>

    <div
      class="grid justify-center sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"
    >
      @if (filteredExams.length > 0) {
        @for (exam of filteredExams; track exam.id) {
          <app-card
            [id]="exam.id"
            [title]="exam.title"
            [description]="exam.description"
            [questionsCount]="exam.questions?.length || exam.questionsCount || 0"
            [manage]="true"
            [category]="exam.category"
            (delete)="handleDelete($event)"
          ></app-card>
        }
      } @else {
        <div class="col-span-full flex flex-col items-center justify-center py-12 px-4 text-center">
          <div class="rounded-full bg-purple-100 dark:bg-purple-900/30 p-3 mb-4">
            <svg class="h-6 w-6 text-purple-600 dark:text-purple-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">No Exams Found</h3>
          <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">
            @if (hasActiveFilters()) {
              No exams match your current filters. Try adjusting your search or category.
            } @else {
              You haven't created any exams yet. Click the button to create your first exam.
            }
          </p>
         
        </div>
      }
    </div>
  </div>
</div>

<app-confirm-modal
  [isOpen]="showDeleteModal"
  [isLoading]="isDeleting"
  (confirm)="onDeleteConfirm()"
  (cancel)="onDeleteCancel()"
  title="Delete Exam"
  message="Are you sure you want to delete this exam? This action cannot be undone."
  confirmText="Delete"
  cancelText="Cancel"
></app-confirm-modal>
